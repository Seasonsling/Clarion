# 吹角 (Chuījiǎo) - AI 原生项目指挥作战系统

**运筹帷幄，跃然纸上。**

---

## 📖 项目哲学

“吹角”之名，源自古战场上发号施令、统一部署的号角声。在现代商业与科研的战场上，一个清晰、协同、可执行的计划，便是我们吹响的胜利号角。本应用旨在成为您团队的数字化“号角”，将高远的战略构想，转化为条理分明的作战地图，确保每一位成员都能闻声而动，协同作战。

我们坚信，最好的工具应当隐于无形，让用户专注于“思考”，而非“操作”。“吹角”正是基于此理念，打造了一个 AI 原生的工作流：您只需通过自然语言下达指令，复杂的项目编排与管理工作即可由 AI 精准完成。

## 🚀 The Gemini Advantage

为了提供最顶级的智能体验和最可靠的规划能力，“吹角”应用内**所有 AI 功能**（包括项目创建、深度优化、智能助理对话、报告生成等），均可由用户在 Google 强大的 `gemini-2.5-pro` 与高效的 `gemini-flash` 模型间自由选择。

您可以根据任务的复杂性（例如，初始的复杂项目生成使用 Pro，快速的任务追加使用 Flash），灵活地平衡成本与性能。这种统一且灵活的模型策略确保了项目全生命周期体验的一致性与卓越性。

**注**：为确保核心工作流的绝对可靠性，“同步周进度”这一复杂功能将始终使用 `gemini-2.5-pro` 模型，以保证数据整合的准确无误。

## ✨ 核心功能

-   **多模态战略规划**：通过自然语言描述您的项目，或直接拖拽、粘贴包含项目信息的文件（图片、PDF）。AI 将深度理解所有输入，自动为您构建包含阶段、依赖关系、时间表和资源分配的完整项目蓝图。
-   **多维战况沙盘**：
    -   **纵览视图**：经典的层级列表，一览项目全貌。
    -   **甘特图**：精准掌控任务时序与关键路径。
    -   **看板**：敏捷管理任务流，实时追踪进度。
    -   **行事历**：以日历视角聚焦关键交付节点。
    -   **工作负载**：洞察团队资源分配，科学调配兵力。
    -   **依赖图**：直观展示任务关联，识别瓶颈与风险。
    -   **思维导图**：发散性梳理项目结构，激发团队灵感。
-   **智能计划演进 (Intelligent Plan Evolution)**:
    -   **初次优化 (Initial Refinement)**: 在项目创建之初，一键调用 AI 对整个计划进行全面审视，智能补全缺失的细节、预估时间并建立任务依赖，快速形成一份专业、完整的作战蓝图。
    -   **周进度同步 (Weekly Progress Sync)**: 每周，团队成员只需在任务下以评论形式汇报进度。点击“同步周进度”，AI 将自动读取所有进度汇报，将其中的关键信息（如完成状态、具体进展、遇到的问题）整合进任务的主信息区，并自动清理已处理的汇报评论，让项目计划实时反映最新战况。
-   **AI 指挥官 (Chat)**：
    -   **全局模型切换**：在对话框中随时切换 `gemini-2.5-pro` 和 `gemini-flash`，该选择将应用于应用内的**所有 AI 功能**。
    -   **即时战情问询**：随时就项目细节提问，AI 实时应答。
    -   **指令式计划调整**：通过“将A任务延后两天”、“完成B任务”等口头指令动态调整计划。所有 AI 变更建议将以“高亮沙盘”形式呈现（新增、修改、删除），待您**审核通过**后方可执行，确保指挥权牢牢在握。
    -   **多媒体情报分析**：上传图表、报告截图，让 AI 结合可视化信息理解您的指令。
    -   **外部情报支持**：集成 Google 搜索，为决策提供更广阔的知识背景。
-   **自动化作战部署与汇报**：
    -   **生成周计划**: AI 分析未来一周的任务，自动生成一份按负责人分组的、结构清晰的周度作战计划。计划包含核心目标、具体任务和预期产出，帮助团队在每周开始前统一思想、明确分工。
    -   **生成周报/月报**: 一键生成结构化、数据详实的周报或月报，精准总结项目态势。
-   **无缝团队协同**：
    -   通过链接或直接邀请，快速组建项目团队。
    -   精细的权限管理（管理员、编辑、观察员），确保信息安全。
    -   **深度任务讨论**：在每个任务下进行细致的讨论，现已支持**编辑**、**删除**评论、通过 **@** 符号**提及**团队成员，并可**上传附件**，确保沟通信息完整留存。
-   **数据安全与开放**：项目数据云端存储，安全可靠。支持完整的项目数据导入与导出（JSON 格式），打破数据壁垒。
-   **敏捷任务追加**：在主页快速录入新想法，AI 自动判断并将其插入到最合适的项目中，确保灵感不丢失。

## 🛠️ 技术架构

-   **前端**:
    -   TypeScript
    -   原生 HTML5 & CSS3 (无框架，追求极致性能与体验)
    -   **Google Gemini AI**: `@google/genai` SDK
-   **后端 (Serverless)**:
    -   Vercel Serverless Functions
    -   **数据库**: Vercel Postgres
    -   **身份认证**: JWT (JSON Web Tokens)
-   **核心 AI 模型**:
    -   `gemini-2.5-pro` (能力强大)
    -   `gemini-flash` (响应迅速)

## 🎯 快速开始

1.  **注册/登录**：创建您的指挥中心账户。
2.  **配置 API 密钥**：首次使用 AI 功能时，系统会提示您输入自己的 Google Gemini API 密钥。密钥仅安全地存储在您的浏览器本地。
3.  **吹响号角 (创建项目)**：在主页，用自然语言尽可能详细地描述您的项目。例如：“我们计划开发一款在线教育App，第一阶段用户研究（为期两周），第二阶段产品设计（一个月），第三阶段开发与测试（三个月），预计年底上线。” 同时可附上产品草图或需求文档。
4.  **审阅作战地图**：点击“开始生成”，AI 将为您呈现一份完整的项目计划。
5.  **指挥与协同**：载入项目后，您可以在多维视图间切换，通过 AI 指挥官动态调整，并邀请团队成员加入，共同推进直至胜利。

## 📈 近期更新

-   **默认展开讨论区**: 为了方便您第一时间掌握沟通上下文，所有任务下的讨论区现在默认展开，无需额外点击即可查看对话。
-   **智能计划演进工作流**: 新增了“优化计划”功能，包含两种模式：
    1.  **初次优化**: 用于在新项目创建后，由AI全面审查并补全计划细节。
    2.  **同步周进度**: 核心的每周工作流功能。AI会自动读取任务评论区的进度汇报，将其智能整合到任务状态和详情中，并清理已读的汇报，让计划实时更新。
-   **新增周计划生成**: 现在，您可以从“生成”菜单中选择“生成周计划”。AI 会分析未来一周的待办和进行中任务，自动为您创建一份结构化的、按负责人分组的行动计划，包含核心目标和预期产出，极大地方便了周度工作的部署与对齐。
-   **丝滑交互体验**: 优化了核心渲染逻辑，消除了在更新任务、保存项目等操作时的多余刷新。现在，应用交互更加流畅，实现了视觉上近乎无感的单次、局部更新，极大提升了操作舒适度。
-   **统一模型选择**: 应用内所有 AI 功能（项目创建、优化、聊天、报告等）现在都会使用您在智能助理面板中选择的模型 (`gemini-2.5-pro` 或 `gemini-flash`)。您可以根据任务需求自由切换，实现对性能和成本的完全掌控。
-   **修复深层任务显示**: 修复了 AI 生成计划时对任务嵌套层数限制过低的问题，确保包含多层子任务的复杂项目也能被完整创建和正确显示。
-   **协作功能深化**:
    -   **评论区增强**: 任务下的讨论区现已支持**编辑**与**删除**评论、通过“@”符号**提及**成员，并可**上传文件附件**，让沟通协作更加高效。

---

“吹角”不仅是一个项目管理工具，更是您战略思想的延伸与放大器。我们致力于让复杂的管理变得简单，让伟大的构想得以实现。